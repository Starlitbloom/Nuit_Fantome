<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuit Fantome - Papelería</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400&display=swap">
</head>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const btnAcceder = document.querySelector(".btn-acceder");
        const dropdown = document.querySelector(".dropdown-content");

        btnAcceder.addEventListener("click", function () {
            dropdown.style.display = (dropdown.style.display === "block") ? "none" : "block";
        });

        // Cierra el menú si hago click fuera
        window.addEventListener("click", function (e) {
            if (!e.target.matches(".btn-acceder")) {
                if (dropdown.style.display === "block") {
                    dropdown.style.display = "none";
                }
            }
        });
    });
</script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const carrito = document.getElementById("carrito");
    const dropdown = document.getElementById("carritoDropdown");
    const contador = document.getElementById("contador");
    const carritoItems = document.getElementById("carritoItems");
    const subtotalEl = document.getElementById("subtotal");

    let productos = []; // lista de productos en el carrito

    // Función para agregar un producto
    function agregarProducto(producto) {
        // Revisar si ya está
        const existe = productos.find(p => p.id === producto.id);
        if (existe) {
            existe.cantidad++;
        } else {
            productos.push({...producto, cantidad: 1});
        }
        actualizarCarrito();
        mostrarDropdown(); // muestra el dropdown al agregar
    }

    // Actualiza la UI del carrito
    function actualizarCarrito() {
        contador.textContent = productos.reduce((acc, p) => acc + p.cantidad, 0);

        carritoItems.innerHTML = "";
        let subtotal = 0;

        productos.forEach(p => {
            subtotal += p.precio * p.cantidad;
            carritoItems.innerHTML += `
                <div class="carrito-item">
                    <img src="${p.img}" alt="${p.nombre}">
                    <div class="carrito-info">
                        <p class="nombre">${p.nombre}</p>
                        <p class="precio">$${p.precio}</p>
                        <div class="cantidad">
                            <button class="menos">-</button>
                            <span>${p.cantidad}</span>
                            <button class="mas">+</button>
                        </div>
                    </div>
                    <i class="fas fa-trash"></i>
                </div>
            `;
        });

        subtotalEl.textContent = `$${subtotal}`;
        agregarEventosItems();
    }

    // Agrega eventos a los botones +, -, borrar
    function agregarEventosItems() {
        const botonesMas = carritoItems.querySelectorAll(".mas");
        const botonesMenos = carritoItems.querySelectorAll(".menos");
        const botonesTrash = carritoItems.querySelectorAll(".fa-trash");

        botonesMas.forEach((btn, i) => {
            btn.addEventListener("click", () => { productos[i].cantidad++; actualizarCarrito(); });
        });
        botonesMenos.forEach((btn, i) => {
            btn.addEventListener("click", () => { 
                if(productos[i].cantidad > 1) productos[i].cantidad--; 
                else productos.splice(i,1);
                actualizarCarrito(); 
            });
        });
        botonesTrash.forEach((btn, i) => {
            btn.addEventListener("click", () => { productos.splice(i,1); actualizarCarrito(); });
        });
    }

    // Mostrar/ocultar dropdown al hacer click en carrito
    carrito.addEventListener("click", function(e) {
        if(e.target.closest(".carrito-dropdown")) return; // no cerrar si se clickea dentro
        dropdown.style.display = (dropdown.style.display === "block") ? "none" : "block";
    });

    // Cerrar si se hace click fuera
    window.addEventListener("click", function(e) {
        if(!carrito.contains(e.target)) dropdown.style.display = "none";
    });

    // Función para mostrar dropdown
    function mostrarDropdown() {
        dropdown.style.display = "block";
    }

    // Ejemplo: agregar producto al carrito (puedes usar botones de tu listado de productos)
    // agregarProducto({id:1, nombre:"Cuaderno Fantôme", precio:5000, img:"assets/img/producto1.jpg"});
});
</script>

<body>
    <!-- Barra superior -->
    <div class="top-bar">
        <div class="info-envios">
            <span>ENVÍOS GRATIS DESDE $24.990</span>
        </div>
        <div class="derecha-redes-sociales">
            <a href="cambios.html">Cambios o Devoluciones</a>
            <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
            <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
            <a href="mailto:contacto@nuitfantome.com"><i class="fas fa-envelope"></i></a>
        </div>
    </div>


    <header>
        <!-- Fila superior: logo, búsqueda, usuario/carrito -->
        <div class="header-superior">
            <!-- Logo a la izquierda -->
            <div class="logo">
            <img src="./assets/img/logo.png" alt="Logo Nuit Fantome">
            </div>

            <!-- Barra de búsqueda en el centro -->
            <div class="busqueda">
                <form action="productos.html" method="get"> 
                    <input type="text" name="buscar" placeholder="Buscar productos...">
                    <button type="submit">  
                        <i class="bi bi-search"></i>
                    </button>
                </form>  
            </div>

            <!-- Login/Registro y carrito a la derecha -->
            <div class="usuario-carrito">
                <div class="dropdown">
                    <button class="btn-acceder">ACCEDER</button>
                    <div class="dropdown-content">
                        <a href="login.html">Iniciar Sesión</a>
                        <a href="register.html">Registrarse</a>
                    </div>
                </div>    
                <!-- Carrito -->
                <div class="carrito" id="carrito">
                    <i class="bi bi-bag"></i>
                    <span class="contador" id="contador">0</span>

                    <!-- Dropdown del carrito -->
                    <div class="carrito-dropdown" id="carritoDropdown">
                        <h4>Tu carrito</h4>
                        <div class="carrito-items" id="carritoItems">
                            <!-- Aquí se van agregando los productos -->
                        </div>
                        <div class="carrito-subtotal">
                            <p>Subtotal: <span id="subtotal">$0</span></p>
                        </div>
                        <button class="btn-finalizar">Finalizar compra</button>
                    </div>
                </div>
            </div>
        </div>

            <!-- Barra de navegación sticky -->
            <nav class="barra-tareas">
                <ul>
                    <li><a href="index.html" class="active">INICIO</a></li>
                    <li><a href="productos.html">PRODUCTOS</a></li>
                    <li><a href="blogs.html">BLOGS</a></li>
                    <li><a href="contacto.html">CONTACTO</a></li>
                </ul>
            </nav>
    </header>
    
    <!-- Sección principal de la tienda -->
    <main>
        <div class="slider">
            <div class="slides">
                <!-- Slide 1 -->
                <div class="slide active">
                    <img src="assets/img/Papeleria_p.jpg" alt="Imagen 1">
                </div>
                <!-- Slide 2 -->
                <div class="slide">
                    <img src="assets/img/planner_p.jpg" alt="Imagen 2">
                </div>
                <!-- Slide 3 -->
                <div class="slide">
                    <img src="assets/img/agendas_p.jpg" alt="Imagen 3">
                </div>
            </div>

            <!-- Flechas -->
            <a class="prev">&#10094;</a>
            <a class="next">&#10095;</a>

            <!-- Puntos -->
            <div class="dots">
                <span class="dot active"></span>
                <span class="dot"></span>
                <span class="dot"></span>
            </div>
        </div>

        <!-- Sección de dos imágenes -->
        <section class="doble-imagenes">
            <div class="imagen-container">
                <img src="assets/img/libretas.jpg" alt="Libretas">
                <div class="overlay">
                    <h3>Libretas</h3>
                </div>
            </div>
            <div class="imagen-container">
                <img src="assets/img/planners.jpg" alt="Planners">
                <div class="overlay">
                    <h3>Planners</h3>
                </div>
            </div>
        </section>

        <!-- Sección de movimiento -->
        <section class="fondo-movimiento">
            <div class="contenido-fondo">
                <h2>Bienvenidos a Nuit Fantome</h2>
                <p>Nuestra papelería tiene como objetivo no solo ofrecer productos de alta calidad para que la gente pueda plasmar sus ideas y crear proyectos únicos, sino que queremos ser una tienda que fomente la creatividad y la conexión humana a través del arte.</p>
                <a href="productos.html" class="btn-comprar">Comprar ahora</a>
            </div>
        </section>

        <!-- Productos destacados -->
        <section class="productos-recientes">
            <h2>Productos recientes</h2>
            <div class="grid-productos">
                <!-- Repite este bloque 8 veces para 8 productos -->
                <div class="producto">
                    <img src="assets/img/producto1.jpg" alt="Producto 1">
                    <h3>Cuaderno Fantôme</h3>
                    <p>$3.500</p>
                </div>
                <div class="producto">
                    <img src="assets/img/producto2.jpg" alt="Producto 2">
                    <h3>Lápiz de colores</h3>
                    <p>$1.200</p>
                </div>
                <!-- ... más productos -->
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Nuit Fantome. Todos los derechos reservados.</p>
        <p><a href="contacto.html">Contacto</a> | <a href="nosotros.html">Nosotros</a></p>
    </footer>
    <script src="./assets/js/slider.js"></script>
</body>
</html>
