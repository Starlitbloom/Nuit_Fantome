<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Carrito â€” Nuit FantÃ´me</title>

  <link rel="stylesheet" href="assets/css/estilos.css">

  <style>
    .cart{width: min(900px, 95%); margin: 20px auto;}
    /* columnas: Producto | Cantidad | Precio | Subtotal */
    .row{display:grid; grid-template-columns: 1fr 110px 120px 90px; gap:12px; align-items:center; padding:10px 0; border-bottom:1px solid #eee;}
    .row h4{margin:0}
    .qty input{width:80px; padding:6px; text-align:center; border:1px solid #ccc; border-radius:8px;}
    .tot{display:flex; justify-content:flex-end; gap:20px; margin-top:16px; align-items:center;}
    .empty{padding:20px; text-align:center; color:#777}

    /* ðŸ‘‡ NUEVO: miniatura y layout dentro de la 1Âª columna */
    .prod{display:flex; align-items:center; gap:10px;}
    .thumb{width:64px; height:64px; object-fit:cover; border-radius:8px; border:1px solid #eee;}
    .prod a{color:#333; text-decoration:none}
    .prod a:hover{text-decoration:underline}
    .muted{color:#777; font-size:.9rem;}
  </style>
</head>
<body>
  <header class="header">
    <nav>
      <a href="index.html">Inicio</a>
      <a href="productos.html">Productos</a>
      <a href="blogs.html">Blogs</a>
      <a href="contacto.html">Contacto</a>
    </nav>
    <a href="carrito.html">Cart (<span id="cart-count">0</span>)</a>
  </header>

  <main class="cart">
    <h2>Tu carrito</h2>
    <div id="cart-list"></div>

    <div class="tot">
      <button class="btn" id="clear">Vaciar</button>
      <div><strong>Total: <span id="grand">$0</span></strong></div>
    </div>
  </main>

  <script>
  // == catÃ¡logo ==
  const productos = [
    // Organizador (igual)
    { id:"org01", categoria:"Organizadores", nombre:"Organizador de escritorio blanco", precio:12990, img:"assets/img/organizador.jpg.avif",
      desc:"Organizador metÃ¡lico con cajÃ³n y compartimentos; ideal para notas, lÃ¡pices y clips." },

    // Resto con descripciones
    { id:"washi01", categoria:"Cintas / Washi", nombre:"Set 5 washi tape â€“ colores mixtos", precio:3990, img:"assets/img/washi-mix5.jpg",
      desc:"Pack de 5 cintas washi de colores mixtos; papel de arroz, reposicionables, 15 mm x 5 m c/u." },

    { id:"calc01", categoria:"Calculadoras", nombre:"Calculadora compacta pastel", precio:6990, img:"assets/img/calculadora-pastel.jpg",
      desc:"Calculadora compacta con teclas suaves y diseÃ±o pastel; pantalla de 12 dÃ­gitos." },

    { id:"washi02", categoria:"Cintas / Washi", nombre:"Washi tape ilustrada â€œVida diariaâ€", precio:3490, img:"assets/img/washi-vida-diaria.jpg",
      desc:"Washi ilustrada temÃ¡tica de vida diaria; ideal para diarios y scrap, 15 mm x 5 m." },

    { id:"washi03", categoria:"Cintas / Washi", nombre:"Set de cintas washi â€“ tonos pastel", precio:3990, img:"assets/img/washi-set-pastel.jpg",
      desc:"Set de cintas washi en tonos pastel; adhesivo suave sin residuos, perfecto para bullet journal." },

    { id:"cut01", categoria:"Corte", nombre:"CÃºter mini â€œPawâ€ (patas de gato)", precio:2990, img:"assets/img/cutter-paw.jpg",
      desc:"CÃºter mini con tapa en forma de pata; hoja retrÃ¡ctil segura para papelerÃ­a y paquetes." },

    { id:"cua03", categoria:"Cuadernos & Libretas", nombre:"Cuaderno ilustrado A5 â€“ Pinturas", precio:4990, img:"assets/img/cuaderno-pinturas.jpg",
      desc:"Cuaderno A5 con ilustraciones; 80 hojas lisas, papel 90 g, tapa dura." },

    { id:"est01", categoria:"Estuches", nombre:"Estuche Sanrio (set 4) ", precio:8990, img:"assets/img/estuche-kuromi.jpg",
      desc:"Estuche Kuromi con compartimentos y cierre resistente; capacidad para 40â€“60 Ãºtiles." },

    { id:"est02", categoria:"Estuches", nombre:"Estuche Sanrio(set 6)", precio:8990, img:"assets/img/estuche-my-melody.jpg",
      desc:"Estuche My Melody con elÃ¡sticos y bolsillo interno; materiales lavables y durables." },

    { id:"fab01", categoria:"LÃ¡pices de grafito", nombre:"Set lÃ¡pices grafito Faber-Castell", precio:18990, img:"assets/img/faber-castell-set.jpg",
      desc:"Set de lÃ¡pices de grafito Faber-Castell (HBâ€“2B); incluye borrador y sacapuntas." },

    { id:"gom02", categoria:"Borradores", nombre:"Borrador elÃ©ctrico recargable", precio:11990, img:"assets/img/goma-electrica.jpg",
      desc:"Borrador elÃ©ctrico recargable por USB; elimina trazos finos sin daÃ±ar el papel." },

    { id:"gom01", categoria:"Borradores", nombre:"Borradores degradÃ© (pack 3)", precio:1990, img:"assets/img/gomas-de-colores.jpg",
      desc:"Pack de 3 gomas degradÃ© libres de lÃ¡tex; borra limpio y sin manchas." },

    { id:"lap10", categoria:"LÃ¡pices de colores", nombre:"Set lÃ¡pices de colores â€“ 10 unidades", precio:3990, img:"assets/img/lapices-10.jpg",
      desc:"Set de 10 lÃ¡pices de color de mina suave; trazo cremoso y colores vibrantes." },

    { id:"lap25", categoria:"LÃ¡pices de colores", nombre:"Set lÃ¡pices de colores â€“ 25 unidades", precio:7990, img:"assets/img/lapices-25.jpg",
      desc:"Set de 25 lÃ¡pices de color; minas resistentes y mezclables, ideal para ilustraciÃ³n." },

    { id:"lap30", categoria:"LÃ¡pices de colores", nombre:"Set lÃ¡pices de colores â€“ 30 unidades", precio:20000, img:"assets/img/lapices-30.jpg",
      desc:"Set de 30 lÃ¡pices de color; incluye tonos piel y pasteles, estuche rÃ­gido." },

    { id:"pinc01", categoria:"Pinceles / Acuarela", nombre:"Pinceles para acuarela (pack)", precio:8990, img:"assets/img/pinceles-acuarelas.jpg",
      desc:"Pack de pinceles para acuarela con cerdas sintÃ©ticas finas y mangos ergonÃ³micos." },

    { id:"post01", categoria:"Notas adhesivas", nombre:"Notas adhesivas Cinnamoroll / Pompompurin", precio:2990, img:"assets/img/postit-cinnamoroll-pompompurin.jpg",
      desc:"Notas adhesivas oficiales Sanrio; papel suave que pega y despega sin residuos." },

    { id:"post02", categoria:"Notas adhesivas", nombre:"Notas adhesivas Kuromi / My Melody", precio:2990, img:"assets/img/postit-kuromi-mymelody.jpg",
      desc:"Notas adhesivas con 3 diseÃ±os; perfectas para recordatorios y journaling." },

    { id:"post03", categoria:"Notas adhesivas", nombre:"Notas adhesivas Pochacco / Hello Kitty", precio:2990, img:"assets/img/postit-pochacco-hellokitty.jpg",
      desc:"Notas adhesivas de colores suaves; aprox. 100 hojas por bloc." },

    { id:"saca01", categoria:"Sacapuntas", nombre:"Sacapuntas + borrador 2 en 1", precio:3490, img:"assets/img/sacapuntas-borrador.jpg",
      desc:"Sacapuntas con depÃ³sito y borrador integrado; formato compacto para estuche." },

    { id:"bol01", categoria:"BolÃ­grafos", nombre:"BolÃ­grafos Sakura gel (pack)", precio:9990, img:"assets/img/sakura-boligrafos.jpg",
      desc:"BolÃ­grafos Sakura de tinta gel pigmentada; secado rÃ¡pido y punta 0.5 mm." },

    { id:"set02", categoria:"Sets", nombre:"Set papelerÃ­a â€œGato Azulâ€", precio:10990, img:"assets/img/set-gato-azul.jpg",
      desc:"Set temÃ¡tico gato azul: stickers, papeles, notas y accesorios combinados." },

    { id:"set01", categoria:"Sets", nombre:"Set papelerÃ­a â€œGato Rosadoâ€", precio:10990, img:"assets/img/set-gato-rosado.jpg",
      desc:"Set temÃ¡tico gato rosado; selecciÃ³n coordinada para journaling y scrap." },

    { id:"washi60", categoria:"Cintas / Washi", nombre:"Set 60 washi tapes", precio:16990, img:"assets/img/set60-cintas.jpg",
      desc:"Mega set de 60 washi tapes variados; anchos y patrones mixtos para proyectos creativos." },

    { id:"clip01", categoria:"Clips / Accesorios", nombre:"Clips decorativos â€œClickâ€ (pack)", precio:2990, img:"assets/img/set-de-click.jpg",
      desc:"Pack de clips decorativos tipo botÃ³n; plÃ¡stico resistente, colores surtidos." },

    { id:"tij01", categoria:"Tijeras", nombre:"Tijeras My Melody", precio:6990, img:"assets/img/tijeras-my-melody.jpg",
      desc:"Tijeras con funda, filo inoxidable y agarre cÃ³modo; corte suave." },

    { id:"washi04", categoria:"Cintas / Washi", nombre:"Washi tape de flores vintage", precio:3490, img:"assets/img/washi-tape-flores.jpg",
      desc:"Washi tape de flores estilo vintage; ideal para cartas, invitaciones y scrapbooking." }
  ];

  // == helpers / carrito ==
  const toCLP = n => n.toLocaleString('es-CL',{style:'currency',currency:'CLP'});
  const CART_KEY='nf_cart';
  const loadCart=()=>{ try{return JSON.parse(localStorage.getItem(CART_KEY))||[]}catch{return[]} };
  const saveCart=c=>{ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateCartCount(); };
  const updateCartCount=()=>{ const el=document.getElementById('cart-count'); if(el) el.textContent = loadCart().reduce((a,b)=>a+b.qty,0); };

  function setQty(id, qty){
    qty = Math.max(1, qty|0);
    const c=loadCart(); const it=c.find(i=>i.id===id); if(!it) return;
    it.qty = qty; saveCart(c); render();
  }
  function removeItem(id){
    let c=loadCart(); c=c.filter(i=>i.id!==id); saveCart(c); render();
  }
  function clearCart(){ saveCart([]); render(); }

  function render(){
    const list=document.getElementById('cart-list'); list.innerHTML='';
    const cart = loadCart();
    if(cart.length===0){ list.innerHTML = `<div class="empty">Tu carrito estÃ¡ vacÃ­o.</div>`; document.getElementById('grand').textContent=toCLP(0); return; }

    let total=0;
    // encabezado
    const head=document.createElement('div');
    head.className='row';
    head.innerHTML=`<strong>Producto</strong><strong>Cantidad</strong><strong>Precio</strong><strong>Subtotal</strong>`;
    list.appendChild(head);

    cart.forEach(it=>{
      const p = productos.find(x=>x.id===it.id); if(!p) return;
      const sub = p.precio * it.qty; total += sub;

      const row=document.createElement('div');
      row.className='row';
      row.innerHTML = `
        <div class="prod">
          <a href="producto.html?id=${it.id}">
            <img class="thumb" src="${p.img || 'assets/img/placeholder.jpg'}" alt="${p.nombre}" loading="lazy">
          </a>
          <div>
            <a href="producto.html?id=${it.id}"><strong>${p.nombre}</strong></a>
            <div class="muted">${p.categoria || ''}</div>
            <button class="btn" style="margin-top:6px" onclick="removeItem('${it.id}')">Eliminar</button>
          </div>
        </div>
        <div class="qty"><input type="number" min="1" value="${it.qty}" onchange="setQty('${it.id}', this.value)"></div>
        <div>${toCLP(p.precio)}</div>
        <div>${toCLP(sub)}</div>
      `;
      list.appendChild(row);
    });

    document.getElementById('grand').textContent = toCLP(total);
  }

  document.getElementById('clear').onclick = clearCart;
  updateCartCount();
  render();
  </script>
</body>
</html>
