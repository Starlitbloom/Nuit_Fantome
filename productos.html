<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Productos — Nuit Fantôme</title>
  <link rel="icon" href="assets/img/icono_pag.png" type="image/png">
  <!-- estilos del home para tener el mismo header/hero/footer -->
  <link rel="stylesheet" href="assets/css/style.css">
  <!-- tus estilos de cards -->
  <link rel="stylesheet" href="assets/css/estilos.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
  <style>
    /* “Hero” de productos */
    .hero-prods{width:min(1100px,94%);margin:18px auto 8px;padding:18px;border-radius:16px;background:#fff;box-shadow:0 8px 20px rgba(30,27,75,.06);border:1px solid #eee}
    .hero-prods h1{margin:0 0 6px}
    .chips{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .chip{
      border:1px solid #e9e5ff;background:#faf8ff;color:#3a2a63;
      padding:7px 12px;border-radius:999px;font-weight:700;cursor:pointer
    }
    .chip.active{background:#7c3aed;color:#fff;border-color:#7c3aed}
    .tools{display:flex;gap:10px;align-items:center;justify-content:space-between;margin-top:12px}
    .tools .orden{border:1px solid #e9e5ff;border-radius:10px;padding:8px 10px;background:#fff}
    .grid{width:min(1100px,94%);margin:12px auto}
    .cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:16px}
    .card{background:#fff;border:1px solid #eee;border-radius:12px;padding:10px;transition:.15s}
    .card:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(30,27,75,.10)}
    .card .ph{width:100%;height:180px;object-fit:cover;border-radius:10px}
    .card .title{font-weight:700;color:#2b254a;text-decoration:none;display:block;margin-top:6px}
    .card .price{color:#7c3aed;font-weight:800}
  </style>
</head>
<body>

  <!-- ======= HEADER (idéntico al index) ======= -->
  <div class="top-bar">
    <div class="info-envios"><span>ENVÍOS GRATIS DESDE $24.990</span></div>
    <div class="derecha-redes-sociales">
      <a href="cambios.html">Cambios o Devoluciones</a>
      <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i></a>
      <a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i></a>
      <a href="mailto:contacto@nuitfantome.com"><i class="fas fa-envelope"></i></a>
    </div>
  </div>

  <header>
    <div class="header-superior">
      <div class="logo"><a href="index.html"><img src="assets/img/logo.png" alt="Logo Nuit Fantome"></a></div>
      <div class="busqueda">
        <form>
          <input type="text" name="buscar" placeholder="Buscar productos...">
          <button type="submit"><i class="bi bi-search"></i></button>
        </form>
      </div>
      <div class="usuario-carrito">
        <div class="dropdown">
          <button class="btn-acceder">ACCEDER</button>
          <div class="dropdown-content">
            <a href="login.html">Iniciar Sesión</a>
            <a href="register.html">Registrarse</a>
          </div>
        </div>
        <a href="carrito.html" style="text-decoration:none">
          <div class="carrito"><i class="bi bi-bag"></i><span class="contador" id="contador">0</span></div>
        </a>
      </div>
    </div>
    <nav class="barra-tareas">
      <ul>
        <li><a href="index.html">INICIO</a></li>
        <li><a href="productos.html" class="active">PRODUCTOS</a></li>
        <li><a href="nosotros.html">NOSOTROS</a></li>
        <li><a href="blogs.html">BLOGS</a></li>
        <li><a href="contacto.html">CONTACTO</a></li>
      </ul>
    </nav>
  </header>

  <!-- ======= HERO + chips + ordenar ======= -->
  <section class="hero-prods">
    <h1 style="color:#2b254a">Productos</h1>
    <p style="margin:0;color:#6c6a7a">Explora papelería bonita con onda <strong>Nuit Fantôme</strong>.</p>

    <div class="tools">
      <div class="chips" id="chips"></div>
      <select id="orden" class="orden">
        <option value="relevancia">Ordenar: Relevancia</option>
        <option value="menor">Precio: menor a mayor</option>
        <option value="mayor">Precio: mayor a menor</option>
        <option value="az">Nombre: A → Z</option>
        <option value="za">Nombre: Z → A</option>
      </select>
    </div>
  </section>

  <!-- grid -->
  <main class="grid">
    <div id="productos-grid" class="cards"></div>
  </main>

  <!-- ======= FOOTER ======= -->
  <section class="final-final">
    <img src="assets/img/fondo_footer.png" alt="Fondo final" class="final-bg">
    <div class="final-contenido">
      <div class="final-logo"><img src="assets/img/logo.png" alt="Logo Nuit Fantome"></div>
      <div class="final-texto">
        <p>Te ayudamos a planificar para lograrlo todo con nuestra papelería física y digital. Sabías que si tu escritorio tiene colores y te gusta, la motivación y la productividad llega por sí sola?</p>
      </div>
      <div class="final-redes">
        <div class="siguenos">Síguenos</div>
        <div class="iconos-redes">
          <a href="https://instagram.com"><img src="assets/img/logo_instagram.png" alt="Instagram"></a>
          <a href="https://facebook.com"><img src="assets/img/logo_facebook.png" alt="Facebook"></a>
          <a href="mailto:contacto@nuitfantome.com"><img src="assets/img/logo_gmail.png" alt="Email"></a>
        </div>
      </div>
    </div>
  </section>
  <footer class="footer-final">
    <div class="footer-contenido">
      <div class="footer-texto">© 2025 Nuit Fantome. Todos los derechos reservados.</div>
      <div class="footer-pagos">
        <img src="assets/img/webpay.png" alt="Webpay">
        <img src="assets/img/transferencia.png" alt="Transferencia bancaria">
        <img src="assets/img/mercado_pago.png" alt="Mercado Pago">
      </div>
    </div>
  </footer>

  <script>
  /* === Catálogo === (mismo que usas en las otras páginas) */
  const productos = [
    { id:"org01", categoria:"Organizadores", nombre:"Organizador de escritorio blanco", precio:12990, img:"assets/img/organizador.jpg.avif", desc:"Organizador metálico con cajón y compartimentos; ideal para notas, lápices y clips." },
    { id:"washi01", categoria:"Cintas / Washi", nombre:"Set 5 washi tape – colores mixtos", precio:3990, img:"assets/img/washi-mix5.jpg", desc:"Pack de 5 cintas washi de colores mixtos; papel de arroz, reposicionables, 15 mm x 5 m c/u." },
    { id:"calc01", categoria:"Calculadoras", nombre:"Calculadora compacta pastel", precio:6990, img:"assets/img/calculadora-pastel.jpg", desc:"Calculadora compacta con teclas suaves y diseño pastel; pantalla de 12 dígitos." },
    { id:"washi02", categoria:"Cintas / Washi", nombre:"Washi tape ilustrada “Vida diaria”", precio:3490, img:"assets/img/washi-vida-diaria.jpg", desc:"Washi ilustrada temática de vida diaria; ideal para diarios y scrap, 15 mm x 5 m." },
    { id:"washi03", categoria:"Cintas / Washi", nombre:"Set de cintas washi – tonos pastel", precio:3990, img:"assets/img/washi-set-pastel.jpg", desc:"Set de cintas washi en tonos pastel; adhesivo suave sin residuos." },
    { id:"cut01", categoria:"Corte", nombre:"Cúter mini “Paw” (patas de gato)", precio:2990, img:"assets/img/cutter-paw.jpg", desc:"Cúter mini con tapa en forma de pata; hoja retráctil segura." },
    { id:"cua03", categoria:"Cuadernos & Libretas", nombre:"Cuaderno ilustrado A5 – Pinturas", precio:4990, img:"assets/img/cuaderno-pinturas.jpg", desc:"Cuaderno A5 con ilustraciones; 80 hojas lisas, papel 90 g, tapa dura." },
    { id:"est01", categoria:"Estuches", nombre:"Estuche Sanrio (set 4) ", precio:8990, img:"assets/img/estuche-kuromi.jpg", desc:"Estuche Kuromi con compartimentos y cierre resistente." },
    { id:"est02", categoria:"Estuches", nombre:"Estuche Sanrio(set 6)", precio:8990, img:"assets/img/estuche-my-melody.jpg", desc:"Estuche My Melody con elásticos y bolsillo interno." },
    { id:"fab01", categoria:"Lápices de grafito", nombre:"Set lápices grafito Faber-Castell", precio:18990, img:"assets/img/faber-castell-set.jpg", desc:"Set de lápices de grafito Faber-Castell (HB–2B); incluye borrador y sacapuntas." },
    { id:"gom02", categoria:"Borradores", nombre:"Borrador eléctrico recargable", precio:11990, img:"assets/img/goma-electrica.jpg", desc:"Borrador eléctrico recargable por USB." },
    { id:"gom01", categoria:"Borradores", nombre:"Borradores degradé (pack 3)", precio:1990, img:"assets/img/gomas-de-colores.jpg", desc:"Pack de 3 gomas degradé libres de látex." },
    { id:"lap10", categoria:"Lápices de colores", nombre:"Set lápices de colores – 10 unidades", precio:3990, img:"assets/img/lapices-10.jpg", desc:"Set de 10 lápices de color de mina suave." },
    { id:"lap25", categoria:"Lápices de colores", nombre:"Set lápices de colores – 25 unidades", precio:7990, img:"assets/img/lapices-25.jpg", desc:"Set de 25 lápices de color; minas resistentes y mezclables." },
    { id:"lap30", categoria:"Lápices de colores", nombre:"Set lápices de colores – 30 unidades", precio:20000, img:"assets/img/lapices-30.jpg", desc:"Set de 30 lápices de color; incluye tonos piel y pasteles." },
    { id:"pinc01", categoria:"Pinceles / Acuarela", nombre:"Pinceles para acuarela (pack)", precio:8990, img:"assets/img/pinceles-acuarelas.jpg", desc:"Pack de pinceles para acuarela." },
    { id:"post01", categoria:"Notas adhesivas", nombre:"Notas adhesivas Cinnamoroll / Pompompurin", precio:2990, img:"assets/img/postit-cinnamoroll-pompompurin.jpg", desc:"Notas adhesivas oficiales Sanrio." },
    { id:"post02", categoria:"Notas adhesivas", nombre:"Notas adhesivas Kuromi / My Melody", precio:2990, img:"assets/img/postit-kuromi-mymelody.jpg", desc:"Notas adhesivas con 3 diseños." },
    { id:"post03", categoria:"Notas adhesivas", nombre:"Notas adhesivas Pochacco / Hello Kitty", precio:2990, img:"assets/img/postit-pochacco-hellokitty.jpg", desc:"Notas adhesivas de colores suaves." },
    { id:"saca01", categoria:"Sacapuntas", nombre:"Sacapuntas + borrador 2 en 1", precio:3490, img:"assets/img/sacapuntas-borrador.jpg", desc:"Sacapuntas con depósito y borrador integrado." },
    { id:"bol01", categoria:"Bolígrafos", nombre:"Bolígrafos Sakura gel (pack)", precio:9990, img:"assets/img/sakura-boligrafos.jpg", desc:"Bolígrafos Sakura de tinta gel pigmentada." },
    { id:"set02", categoria:"Sets", nombre:"Set papelería “Gato Azul”", precio:10990, img:"assets/img/set-gato-azul.jpg", desc:"Set temático gato azul." },
    { id:"set01", categoria:"Sets", nombre:"Set papelería “Gato Rosado”", precio:10990, img:"assets/img/set-gato-rosado.jpg", desc:"Set temático gato rosado." },
    { id:"washi60", categoria:"Cintas / Washi", nombre:"Set 60 washi tapes", precio:16990, img:"assets/img/set60-cintas.jpg", desc:"Mega set de 60 washi tapes." },
    { id:"clip01", categoria:"Clips / Accesorios", nombre:"Clips decorativos “Click” (pack)", precio:2990, img:"assets/img/set-de-click.jpg", desc:"Pack de clips decorativos tipo botón." },
    { id:"tij01", categoria:"Tijeras", nombre:"Tijeras My Melody", precio:6990, img:"assets/img/tijeras-my-melody.jpg", desc:"Tijeras con funda, filo inoxidable." },
    { id:"washi04", categoria:"Cintas / Washi", nombre:"Washi tape de flores vintage", precio:3490, img:"assets/img/washi-tape-flores.jpg", desc:"Washi tape de flores estilo vintage." }
  ];

  const $ = s => document.querySelector(s);
  const grid = $('#productos-grid');
  const chipsWrap = $('#chips');
  const ordenSel = $('#orden');

  /* ===== Estado de filtros ===== */
  const state = {
    q: '',            // texto de búsqueda
    cat: 'Todas',     // categoría seleccionada
    orden: 'relevancia'
  };

  /* ===== Construir chips de categorías ===== */
  const cats = ['Todas', ...Array.from(new Set(productos.map(p=>p.categoria)))];
  function renderChips(){
    chipsWrap.innerHTML = '';
    cats.forEach(c=>{
      const b = document.createElement('button');
      b.className = 'chip' + (state.cat===c ? ' active':'');
      b.textContent = c;
      b.onclick = () => { state.cat=c; render(); };
      chipsWrap.appendChild(b);
    });
  }

  /* ===== Render cards ===== */
  function renderCard(p){
    const el = document.createElement('article');
    el.className = 'card';
    el.innerHTML = `
      <a href="producto.html?id=${p.id}">
        ${p.img ? `<img src="${p.img}" alt="${p.nombre}" class="ph">` : `<div class="ph"></div>`}
      </a>
      <a class="title" href="producto.html?id=${p.id}">${p.nombre}</a>
      <div class="price">${p.precio.toLocaleString('es-CL',{style:'currency',currency:'CLP'})}</div>
      <button class="btn" style="margin-top:6px" onclick="addToCart('${p.id}',1)">Añadir</button>
    `;
    return el;
  }

  /* ===== Filtrado + ordenamiento ===== */
  function render(){
    renderChips();
    let list = productos.filter(p=>{
      const okCat = state.cat==='Todas' || p.categoria===state.cat;
      const q = state.q.trim().toLowerCase();
      const okQ = !q || p.nombre.toLowerCase().includes(q) || (p.desc||'').toLowerCase().includes(q);
      return okCat && okQ;
    });

    switch(state.orden){
      case 'menor': list.sort((a,b)=>a.precio-b.precio); break;
      case 'mayor': list.sort((a,b)=>b.precio-a.precio); break;
      case 'az': list.sort((a,b)=>a.nombre.localeCompare(b.nombre)); break;
      case 'za': list.sort((a,b)=>b.nombre.localeCompare(a.nombre)); break;
      default: /* relevancia: sin ordenar */ break;
    }

    grid.innerHTML = '';
    if(!list.length){
      grid.innerHTML = '<div style="color:#6c6a7a">No encontramos productos con esos filtros.</div>';
      return;
    }
    list.forEach(p=> grid.appendChild(renderCard(p)));
  }

  /* ===== Carrito (contador en header) ===== */
  const CART_KEY='nf_cart';
  const loadCart=()=>{ try{return JSON.parse(localStorage.getItem(CART_KEY))||[]}catch{return[]} };
  const saveCart=c=>{ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateCartCount(); };
  function addToCart(id, qty=1){ const c=loadCart(); const it=c.find(i=>i.id===id); if(it) it.qty+=qty; else c.push({id,qty}); saveCart(c); alert('Producto añadido al carrito'); }
  function updateCartCount(){ const el=document.getElementById('contador'); if(el) el.textContent = loadCart().reduce((a,b)=>a+b.qty,0); }

  /* ===== Buscar SOLO con el input del header ===== */
  const headerForm = document.querySelector('.busqueda form');
  const headerInput = document.querySelector('.busqueda input[name="buscar"]');

  if(headerForm){
    headerForm.addEventListener('submit', e=>{ e.preventDefault(); }); // no recargar
  }
  if(headerInput){
    headerInput.addEventListener('input', ()=>{
      state.q = headerInput.value;
      render();
      // opcional: actualizar la query en la URL sin recargar
      const url = new URL(location);
      if(state.q) url.searchParams.set('buscar', state.q); else url.searchParams.delete('buscar');
      history.replaceState({}, '', url);
    });
  }

  // Si llegas con ?buscar= desde el home, úsalo
  const initQ = new URLSearchParams(location.search).get('buscar');
  if(initQ && headerInput){ headerInput.value = initQ; state.q = initQ; }

  // Orden
  ordenSel.addEventListener('change', ()=>{ state.orden = ordenSel.value; render(); });

  // Arranque
  updateCartCount();
  render();
  </script>
</body>
</html>
